<html>
  <body>
    <h2>repl</h2>
    <label for="output">out:</label>
    <textarea id="output" style="width: 40em; height: 20em"></textarea>
    <br>
    <label for="input">in:</label>
    <input id="input" type="text">
  </body>

  <script>
    let output = document.getElementById("output")
    output.log = (text) => output.innerHTML += JSON.stringify(text) + "\n"

    let rewrite = (expression, rules) => {
      let rewrites = {}
      for([a, b] of Object.entries(rules)) if(expression[a]) rewrites[a] = b
      return Object.assign(expression, rewrites)
    }

    let one = {expression1:{}}
    let one_two = {expression1:{expression2:{}}}
    let two = {expression2:{}}
    output.log("with one")
    output.log(one)
    output.log("and one_two")
    output.log(one_two)
    output.log("then by rewrite(one, one_two)")
    output.log(rewrite(one, one_two))
    output.log("expect two")
    output.log(two)

    output.log("nop")
    output.log(rewrite(one,{}))
    output.log("nested")
    output.log(rewrite({expression:{expression1:{}}}))
    output.log("none")
    output.log(rewrite(one, one))

    let wiki.exp = {a:{},b:{},c:{}}
    wiki.rules = {a:{b:{}},b:{a:{}},a:{c:{}},b:{c:{}}}
    output.log("wiki")
    output.log(rewrite(wixi.exp, wikilrules))
  </script>
</html>
